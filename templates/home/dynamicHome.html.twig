{% extends 'base.html.twig' %}

{% block title %}Home Ratp Api{% endblock %}

{% block body %}


<div class="container">

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="/">Ratp Api</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarColor03">
        <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
            <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ path('dynamic') }}">Page de Filtre </a>
        </li>
     
        </ul>
       <div class="form-group">
      <label for="">Filtrer par ligne</label>
      <select class="form-control target" base-url="{{ path('filterList')}}">
      <option>All</option>
      {% for line in lignes|sort %}
        <option>{{line.ligne}}</option>
        {% endfor %}
      </select>
    </div>
    </div>
    </nav>

</div>

<div class="container inner">
<table id="example" class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Gare</th>
      <th scope="col">Lignes</th>
      <th scope="col">Correspondance</th>
      <th scope="col">Terminus</th>
    </tr>
  </thead>
  <tbody>
  {# {{dump(infos)}} #}
{% for gare in infos %}

   <tr class="table-default">
      <th scope="row">{{ gare["gare"].gareId}}</th>
      <td> {{ gare["gare"].ligne }} </td>
      <td>
      {# {{dump(gare["lignes"])}} #}
      {% for ligne in gare["lignes"] %}
       {# {{ dump(ligne) }}  #}
       {{ ligne.ligne }}
      {% endfor %}</td>

     
      <td>
      
      {% for ligne in gare["lignes"] %}
       {% if ligne.terminus == true  %}
       {{ ligne.ligne }}
       {% endif %}
      {% endfor %}</td>
      
     
      </td>
   
     
    </tr>
   {% endfor %}
  
   
  </tbody>
</table> 
</div>

 
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.jqueryui.min.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.jqueryui.min.js"></script>
<script>

$(document).ready(function() {
	$('#example').DataTable( {
		
	} );
} );
 {# $( ".target" ).select(function() { alert("tet");
    var url = $(this).attr('base-url') + $(this).val();
  $.ajax({
        type: 'POST',
        data:  $('#AttorneyEmpresa').val(),
        url: url,
        success: function () {
            console.log('success');
        }
    });
   
});  #}

$(".target").change(function() {
  //event.preventDefault();
  var line = $('.target').val();
 
 switch(line){
  case '1' :  document.getElementById("example").style.backgroundColor = "#fff261";
              break;
  case '2' :  document.getElementById("example").style.backgroundColor = "#668cff";
              break;
  case '3' :  document.getElementById("example").style.backgroundColor = "#acc936";
              break;
  case '4' :  document.getElementById("example").style.backgroundColor = "#d464e3";
              break;
  case '5' :  document.getElementById("example").style.backgroundColor = "#de955d";
              break;
  case '6' :  document.getElementById("example").style.backgroundColor = "#78cf89";
              break;
  case '7' :  document.getElementById("example").style.backgroundColor = "#f0aad3";
              break;
  case '8' :  document.getElementById("example").style.backgroundColor = "#dc97f0";
              break;
  case '9' :  document.getElementById("example").style.backgroundColor = "#b3c94f";
              break;
  case '10' :  document.getElementById("example").style.backgroundColor = "#edd05a";
              break;
  case '11' :  document.getElementById("example").style.backgroundColor = "#b5831f";
              break;
  case '12' :  document.getElementById("example").style.backgroundColor = "#32ad5d";
              break;
  case '13' :  document.getElementById("example").style.backgroundColor = "#3ec9c9";
              break;
  case '14' :  document.getElementById("example").style.backgroundColor = "#a54de8";
              break;
  case 'M3bis' :  document.getElementById("example").style.backgroundColor = "#21b2c2";
              break;
  case '7b' :  document.getElementById("example").style.backgroundColor = "#63dba5";
              break;
  case 'All' :  document.getElementById("example").style.backgroundColor = "#c9c9c9";
              break;


  }
 // alert(line);
//var url = $(this).attr('base-url') ;
  $.ajax({
        type: 'POST',
        url: "{{ path('filterList')}}",
        data: { "line": line },
        success: function (data) {   
          //alert("success"); 
          $( "#example" ).empty();
         $("#example").append( data );
        }
    });
}); 


</script>
{% endblock %}





